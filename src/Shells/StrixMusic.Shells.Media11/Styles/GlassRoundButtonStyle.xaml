<ResourceDictionary
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:StrixMusic.Shells.Media11"
    xmlns:controls="using:StrixMusic.Shells.Media11.Controls"
    xmlns:tkcontrols="using:CommunityToolkit.WinUI.Controls"
    xmlns:media="using:Microsoft.UI.Xaml.Media">

    <x:String x:Key="GlassRoundShineGeometry">M1,15 C 6,16 2,13.75 15,13.75 C 28,13.75 24,16 29,15 C 29,7.5 23,1 15,1 C 6,1 1,8.5 1,15 Z</x:String>

    <media:RadialGradientBrush x:Key="GlassRoundButtonNormalBallFillBrush"
                               GradientOrigin="0.5,1.0" MappingMode="RelativeToBoundingBox"
                               RadiusX="1.0" RadiusY="1.0">
        <GradientStop Color="{ThemeResource SystemAccentColorLight2}" Offset="0.0"/>
        <GradientStop Color="{ThemeResource SystemAccentColorDark3}" Offset="1.0"/>
    </media:RadialGradientBrush>

    <LinearGradientBrush x:Key="GlassRoundButtonNormalBallStrokeBrush"
                         StartPoint="0,0" EndPoint="0,1" MappingMode="RelativeToBoundingBox">
        <GradientStop Color="{ThemeResource SystemAccentColorLight1}" Offset="0.00" />
        <GradientStop Color="{ThemeResource SystemAccentColorDark1}" Offset="0.40" />
        <GradientStop Color="{ThemeResource SystemAccentColorDark3}" Offset="0.75" />
        <GradientStop Color="{ThemeResource SystemAccentColorDark2}" Offset="0.87" />
        <GradientStop Color="{ThemeResource SystemAccentColor}" Offset="1.00" />
    </LinearGradientBrush>

    <media:RadialGradientBrush x:Key="GlassRoundButtonNormalShineFillBrush" GradientOrigin="14,15" Center="14,20"
                               RadiusX="15" RadiusY="17"
                               MappingMode="Absolute">
        <GradientStop Color="#44FFFFFF" Offset="0.5"/>
        <GradientStop Color="#66FFFFFF" Offset="1.0"/>
    </media:RadialGradientBrush>
    
    <media:RadialGradientBrush x:Key="GlassRoundButtonPointerOverBallFillBrush"
                               GradientOrigin="0.5,1.0" MappingMode="RelativeToBoundingBox"
                               RadiusX="1.0" RadiusY="1.0">
        <GradientStop Color="{ThemeResource SystemAccentColorLight2}" Offset="0.0"/>
        <GradientStop Color="{ThemeResource SystemAccentColorDark1}" Offset="1.0"/>
    </media:RadialGradientBrush>

    <media:RadialGradientBrush x:Key="GlassRoundButtonPointerOverShineFillBrush"
                               GradientOrigin="14,15" Center="14,20" MappingMode="Absolute"
                               RadiusX="15" RadiusY="17">
        <GradientStop Color="#55FFFFFF" Offset="0.5"/>
        <GradientStop Color="#77FFFFFF" Offset="1.0"/>
    </media:RadialGradientBrush>

    <media:RadialGradientBrush x:Key="GlassRoundButtonPressedBallFillBrush"
                               GradientOrigin="0.5,1.0" MappingMode="RelativeToBoundingBox"
                               RadiusX="1.0" RadiusY="1.0" >
        <GradientStop Color="{ThemeResource SystemAccentColorLight1}" Offset="0.0"/>
        <GradientStop Color="{ThemeResource SystemAccentColorDark3}" Offset="1.0"/>
    </media:RadialGradientBrush>
    
    <media:RadialGradientBrush x:Key="GlassRoundButtonPressedShineFillBrush"
                               GradientOrigin="14,15" Center="14,20" MappingMode="Absolute"
                               RadiusX="15" RadiusY="17">
        <GradientStop Color="#55FFFFFF" Offset="0.5"/>
        <GradientStop Color="#77FFFFFF" Offset="1.0"/>
    </media:RadialGradientBrush>

    <LinearGradientBrush x:Key="GlassRoundButtonDisabledBallStrokeBrush"
                         StartPoint="0,0" EndPoint="0,1" MappingMode="RelativeToBoundingBox">
        <GradientStop Color="#82000000" Offset="0.00" />
        <GradientStop Color="#5E000000" Offset="0.40" />
        <GradientStop Color="#3F000000" Offset="0.75" />
        <GradientStop Color="#32000000" Offset="0.87" />
        <GradientStop Color="#2E000000" Offset="1.00" />
    </LinearGradientBrush>

    <SolidColorBrush x:Key="GlassRoundButtonDisabledBallFillBrush" Color="Transparent" />

    <media:RadialGradientBrush x:Key="GlassRoundButtonDisabledShineFillBrush" GradientOrigin="14,15" Center="14,20"
                               RadiusX="15" RadiusY="17"
                               MappingMode="Absolute">
        <GradientStop Color="#44FFFFFF" Offset="0.5"/>
        <GradientStop Color="#77FFFFFF" Offset="1.0"/>
    </media:RadialGradientBrush>

    <x:Double x:Key="GlassRoundButtonDisabledContentOpacity">0.75</x:Double>

    <Style x:Key="GlassRoundButtonStyle" TargetType="Button">
        <Setter Property="Foreground" Value="White" />
        <Setter Property="Background" Value="Transparent" />
        <Setter Property="CornerRadius" Value="0" />
        <Setter Property="BorderThickness" Value="1" />
        <Setter Property="BorderBrush" Value="Transparent" />
        <Setter Property="Padding" Value="4" />
        <Setter Property="FontSize" Value="12" />
        <Setter Property="Height" Value="24" />
        <Setter Property="Width" Value="24" />
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="Button">
                    <Grid x:Name="RootGrid">
                        <Viewbox Grid.Row="1" HorizontalAlignment="Left" Height="{TemplateBinding Height}">
                            <Canvas Height="30" Width="30">
                                <Ellipse x:Name="Ball" Height="30" Width="30" StrokeThickness="{TemplateBinding BorderThickness}"
                                         Fill="{ThemeResource GlassRoundButtonNormalBallFillBrush}"
                                         Stroke="{ThemeResource GlassRoundButtonNormalBallStrokeBrush}" />

                                <Path x:Name="Shine" Fill="{ThemeResource GlassRoundButtonNormalShineFillBrush}"
                                      Data="{StaticResource GlassRoundShineGeometry}" />
                            </Canvas>
                        </Viewbox>
                        
                        <ContentPresenter
                            x:Name="ContentPresenter"
                            Content="{TemplateBinding Content}"
                            ContentTemplate="{TemplateBinding ContentTemplate}"
                            ContentTransitions="{TemplateBinding ContentTransitions}"
                            CornerRadius="{TemplateBinding CornerRadius}"
                            Padding="{TemplateBinding Padding}"
                            HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"
                            VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"
                            AutomationProperties.AccessibilityView="Raw">

                            <ContentPresenter.BackgroundTransition>
                                <BrushTransition Duration="0:0:0.083" />
                            </ContentPresenter.BackgroundTransition>
                        </ContentPresenter>

                        <VisualStateManager.VisualStateGroups>
                            <VisualStateGroup x:Name="CommonStates">
                                <VisualState x:Name="Normal"/>
                                <VisualState x:Name="PointerOver">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Ball"
                                                                       Storyboard.TargetProperty="Fill">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource GlassRoundButtonPointerOverBallFillBrush}" />
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Shine"
                                                                       Storyboard.TargetProperty="Fill">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource GlassRoundButtonPointerOverShineFillBrush}" />
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Pressed">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Ball"
                                                                       Storyboard.TargetProperty="Fill">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource GlassRoundButtonPressedBallFillBrush}" />
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Shine"
                                                                       Storyboard.TargetProperty="Fill">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource GlassRoundButtonPressedShineFillBrush}" />
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>

                                <VisualState x:Name="Disabled">
                                    <Storyboard>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="ContentPresenter"
                                                                       Storyboard.TargetProperty="Opacity">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource GlassRoundButtonDisabledContentOpacity}" />
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Ball"
                                                                       Storyboard.TargetProperty="Fill">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource GlassRoundButtonDisabledBallFillBrush}" />
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Ball"
                                                                       Storyboard.TargetProperty="Stroke">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource GlassRoundButtonDisabledBallStrokeBrush}"/>
                                        </ObjectAnimationUsingKeyFrames>
                                        <ObjectAnimationUsingKeyFrames Storyboard.TargetName="Shine"
                                                                       Storyboard.TargetProperty="Fill">
                                            <DiscreteObjectKeyFrame KeyTime="0" Value="{ThemeResource GlassRoundButtonDisabledShineFillBrush}" />
                                        </ObjectAnimationUsingKeyFrames>
                                    </Storyboard>
                                </VisualState>
                            </VisualStateGroup>
                        </VisualStateManager.VisualStateGroups>
                    </Grid>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>

</ResourceDictionary>
